(this["webpackJsonp01-todolist"]=this["webpackJsonp01-todolist"]||[]).push([[0],{18:function(t,e,n){},30:function(t,e,n){t.exports=n(59)},35:function(t,e,n){},59:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),i=n(12),r=n.n(i),s=(n(35),n(2)),c=n(10),l=n(4),d=n(3),u=n(5),p=(n(18),n(8)),f=function(t){function e(){var t;return Object(s.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).call(this))).state={error:!1,title:""},t.deleteTask=function(){t.props.deleteTodoList(t.props.id)},t.onAddItemClick=function(){var e=t.state.title;t.setState({title:""}),""===e?t.setState({error:!0}):(t.setState({error:!1}),t.props.addItem(e))},t.onTitleChanged=function(e){t.props.setText(e.currentTarget.value),t.setState({error:!1,title:e.currentTarget.value})},t.onKeyPress=function(e){"Enter"===e.key&&t.onAddItemClick()},t.render=function(){var e=t.state.error?"error":"";return o.a.createElement("div",{className:"todoList-newTaskForm titile-newTaskForm"},o.a.createElement("input",{type:"text",onKeyPress:t.onKeyPress,placeholder:"New task name",onChange:t.onTitleChanged,className:e,value:t.state.title}),o.a.createElement("button",{onClick:t.onAddItemClick,className:"btnNewTaskForm"},"Add"))},t}return Object(u.a)(e,t),e}(o.a.Component),T=Object(p.b)((function(t){return{newTextFromItemForm:t.newTextFromItemForm}}),(function(t){return{setText:function(e){t({type:"SET-NEW-TEXT",text:e})}}}))(f),h=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(i)))).state={isHidden:!1},n.onAllFilterClick=function(){n.props.changeFilter("All")},n.onCompletedFilterClick=function(){n.props.changeFilter("Completed")},n.onActiveFilterClick=function(){n.props.changeFilter("Active")},n.onShowFiltersClick=function(){n.setState({isHidden:!1})},n.onHideFiltersClick=function(){n.setState({isHidden:!0})},n.render=function(){var t="All"===n.props.filterValue?"filter-active":"",e="Completed"===n.props.filterValue?"filter-active":"",a="Active"===n.props.filterValue?"filter-active":"";return o.a.createElement("div",{className:"todoList-footer"},!n.state.isHidden&&o.a.createElement("div",{className:"todoList-footer-block"},o.a.createElement("button",{onClick:n.onAllFilterClick,className:t},"All"),o.a.createElement("button",{onClick:n.onCompletedFilterClick,className:e},"Completed"),o.a.createElement("button",{onClick:n.onActiveFilterClick,className:a},"Active")),!n.state.isHidden&&o.a.createElement("button",{onClick:n.onHideFiltersClick},"hide"),n.state.isHidden&&o.a.createElement("button",{onClick:n.onShowFiltersClick},"show"))},n}return Object(u.a)(e,t),e}(o.a.Component),k=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(l.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(o)))).state={editMode:!1,title:n.props.task.title},n.activatedEditMode=function(){n.setState({editMode:!0})},n.deActivatedEditMode=function(){n.props.changeTitle(n.props.task.id,n.state.title),n.setState({editMode:!1})},n.onIsDoneChanged=function(t){var e=t.currentTarget.checked?2:0;n.props.changeStatus(n.props.task.id,e)},n.onTitleChanged=function(t){n.setState({title:t.currentTarget.value})},n.deleteTask=function(){n.props.deleteTask(n.props.task.id)},n}return Object(u.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this.props.task.isDone?"todoList-task done":"todoList-task";return o.a.createElement("div",{className:t},o.a.createElement("input",{type:"checkbox",checked:this.props.task.isDone,onChange:this.onIsDoneChanged}),this.state.editMode?o.a.createElement("input",{autoFocus:!0,value:this.state.title,onBlur:this.deActivatedEditMode,onChange:this.onTitleChanged}):o.a.createElement("span",{onClick:this.activatedEditMode}," ",this.state.title,", priority: ",this.props.task.priority),o.a.createElement("button",{className:"buttonClose",type:"button",onClick:this.deleteTask},"x"))}}]),e}(o.a.Component),m=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(l.a)(this,Object(d.a)(e).call(this,t))).render=function(){var t=n.props.tasks.map((function(t){return o.a.createElement(k,{task:t,changeStatus:n.props.changeStatus,changeTitle:n.props.changeTitle,deleteTask:n.props.deleteTask,key:t.id})}));return o.a.createElement("div",{className:"todoList-tasks"},t)},n}return Object(u.a)(e,t),e}(o.a.Component),v=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(i)))).state={editTitle:!1,title:n.props.title},n.deActivatedEdit=function(){n.setState({editTitle:!1}),n.props.updateTodoTitle(n.state.title)},n.onTitleChanged=function(t){n.setState({title:t.currentTarget.value})},n.activatedEdit=function(){n.setState({editTitle:!0})},n.render=function(){return o.a.createElement("div",{className:"todoList-header__wrapper"},o.a.createElement("h1",null,n.state.editTitle?o.a.createElement("input",{autoFocus:!0,value:n.state.title,onBlur:n.deActivatedEdit,onChange:n.onTitleChanged}):o.a.createElement("span",{onClick:n.activatedEdit},n.state.title)),o.a.createElement("button",{className:"btnClose",type:"button",onClick:n.props.deleteTodolist},"x"))},n}return Object(u.a)(e,t),e}(o.a.Component),b=n(16),E=n(1),O=n(28),g=n.n(O).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/todo-lists",withCredentials:!0,headers:{"API-KEY":"a5358ace-4ecb-440c-9225-23342cbb6a67"}}),j=function(t,e){return g.post("/".concat(e,"/tasks"),{title:t})},C=function(t){return g.post("",{title:t})},S=function(t){return g.put("/".concat(t.todoListId,"/tasks/").concat(t.id),t)},y=function(t){return g.delete("/".concat(t))},A=function(t,e){return g.delete("/".concat(e,"/tasks/").concat(t))},w=function(){return g.get("")},I=function(t){return g.get("/".concat(t,"/tasks"))},L=function(t,e){return g.put("/".concat(e),{title:t})},F="TodoList/Reducer/SET_TODOLISTS",N="TodoList/Reducer/ADD-TODOLIST",D="TodoList/Reducer/DELETE-TODOLIST",x="TodoList/Reducer/DELETE-TASK",M="TodoList/Reducer/ADD-TASK",K="TodoList/Reducer/SET_TASKS",R="TodoList/Reducer/UPDATE-TASK",H={todolists:[]},V=function(){return function(t,e){w().then((function(e){var n;t((n=e.data,{type:F,todolists:n}))}))}},P=function(t){return function(e,n){C(t).then((function(t){var n=t.data.data.item;e({type:N,newTodolist:n})}))}},B=function(t){return function(e,n){I(t).then((function(n){var a=n.data.items;e(function(t,e){return{type:K,tasks:t,todolistId:e}}(a,t))}))}},W=function(t,e){return function(n,a){j(t,e).then((function(t){var a=t.data.data.item;n(function(t,e){return{type:M,newTask:t,todolistId:e}}(a,e))}))}},_=function(t,e,n){return function(a,o){o().todolists.find((function(t){return t.id===n})).tasks.forEach((function(n){n.id===t&&S(Object(E.a)({},n,{},e)).then((function(t){var e=t.data.data.item;0===t.data.resultCode&&a(function(t,e,n){return{type:R,taskId:t,obj:e,todolistId:n}}(e))}))}))}},J=function(t){return function(e,n){y(t).then((function(n){0===n.data.resultCode&&e(function(t){return{type:D,todolistId:t}}(t))}))}},U=function(t,e){return function(n,a){A(t,e).then((function(a){n(function(t,e){return{type:x,taskId:t,todolistId:e}}(t,e))}))}},X=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case K:return Object(E.a)({},t,{todolists:t.todolists.map((function(t){return t.id===e.todolistId?Object(E.a)({},t,{tasks:e.tasks}):t}))});case F:var n=e.todolists.map((function(t){return Object(E.a)({},t,{tasks:[]})}));return Object(E.a)({},t,{todolists:n});case N:var a=Object(E.a)({},e.newTodolist,{tasks:[]});return Object(E.a)({},t,{todolists:[a].concat(Object(b.a)(t.todolists))});case D:return Object(E.a)({},t,{todolists:t.todolists.filter((function(t){return t.id!=e.todolistId}))});case x:return Object(E.a)({},t,{todolists:t.todolists.map((function(t){return t.id===e.todolistId?Object(E.a)({},t,{tasks:t.tasks.filter((function(t){return t.id!=e.taskId}))}):t}))});case M:return Object(E.a)({},t,{todolists:t.todolists.map((function(t){return t.id===e.todolistId?Object(E.a)({},t,{tasks:[].concat(Object(b.a)(t.tasks),[e.newTask])}):t}))});case R:return Object(E.a)({},t,{todolists:t.todolists.map((function(t){return t.id===e.todolistId?Object(E.a)({},t,{tasks:t.tasks.map((function(t){return t.id!=e.taskId?t:Object(E.a)({},t,{},e.obj)}))}):t}))})}return console.log("reducer: ",e),t},Y=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(l.a)(this,Object(d.a)(e).call(this,t))).state={tasks:[],filterValue:"All"},n.saveState=function(){var t=JSON.stringify(n.state);localStorage.setItem("our-state-"+n.props.id,t)},n.restoreState=function(){n.props.getTasks(n.props.id)},n.addTask=function(t){n.props.createTask(t,n.props.id)},n.changeFilter=function(t){n.setState({filterValue:t},(function(){n.saveState()}))},n.changeTask=function(t,e){n.props.updateTask(t,e,n.props.id)},n.deleteTodolist=function(){n.props.deleteTodolist(n.props.id)},n.deleteTask=function(t){n.props.deleteTask(t,n.props.id)},n.changeStatus=function(t,e){n.changeTask(t,{isDone:e})},n.changeTitle=function(t,e){n.changeTask(t,{title:e})},n.updateTodoTitle=function(t){n.props.updateTodolistTitle(t,n.props.id)},n.render=function(){var t,e=n.props.tasks,a=void 0===e?[]:e;return o.a.createElement("div",{className:"App-wrapper"},o.a.createElement("div",{className:"todoList"},o.a.createElement("div",{className:"todoList-header"},o.a.createElement(v,{title:n.props.title,deleteTodolist:n.deleteTodolist,updateTodoTitle:n.updateTodoTitle}),o.a.createElement(T,{addItem:n.addTask,deleteTask:n.deleteTask})),o.a.createElement(m,{tasks:(n.props.tasks,t=n.state.filterValue,a.filter((function(e){switch(t){case"All":return!0;case"Completed":return e.isDone;case"Active":return!e.isDone;default:return!0}}))),changeStatus:n.changeStatus,changeTitle:n.changeTitle,deleteTask:n.deleteTask}),o.a.createElement(h,{filterValue:n.state.filterValue,changeFilter:n.changeFilter})))},n}return Object(u.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.restoreState()}}]),e}(o.a.Component),$=Object(p.b)(null,(function(t){return{addTask:function(e,n){var a=W(e,n);t(a)},getTasks:function(e){var n=B(e);t(n)},updateTask:function(e,n,a){var o=_(e,n,a);t(o)},deleteTodolist:function(e){var n=J(e);t(n)},deleteTask:function(e,n){var a=U(e,n);t(a)},updateTodolistTitle:function(e,n){var a=function(t,e){return function(n,a){L(t,e).then((function(a){0===a.data.resultCode&&n(function(t,e){return{type:"TodoList/Reducer/UPDATE-TASK",newTodolistTitle:t,todolistId:e}}(t,e))}))}}(e,n);t(a)},createTask:function(e,n){var a=W(e,n);t(a)}}}))(Y),q=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(i)))).state={todolists:[]},n.restoreState=function(){n.props.getTodolists()},n.addTodoList=function(t){n.props.createTodolist(t)},n.render=function(){var t=n.props.todolists.map((function(t){return o.a.createElement($,{id:t.id,title:t.title,tasks:t.tasks,key:t.id})}));return o.a.createElement("div",{className:"app"},o.a.createElement("div",null,o.a.createElement(T,{addItem:n.addTodoList,delete:n.deleteTodoList})),o.a.createElement("div",{className:"appWrapper"},t))},n}return Object(u.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.restoreState()}}]),e}(o.a.Component),z=Object(p.b)((function(t){return{todolists:t.todolists}}),(function(t){return{getTodolists:function(){var e=V();t(e)},createTodolist:function(e){var n=P(e);t(n)}}}))(q);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=n(11),Q=n(29),Z=Object(G.c)(X,Object(G.a)(Q.a));window.store=Z;var tt=Z;r.a.render(o.a.createElement(p.a,{store:tt},o.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[30,1,2]]]);
//# sourceMappingURL=main.68855e1e.chunk.js.map